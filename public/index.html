<!DOCTYPE html>
<html>
	<head>
		<title>Messages</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>

	</head>
	<body>
		<h1>Thanks for helping us count to a million</h1>

	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.1/socket.io.js"></script>
	<p id="result"></p>
	<script>
		var socket = io.connect();
		var w;
		socket.on('number',function(data){
			startWorker(data);
		});
		socket.on('updatedMen',function(data){
			document.getElementById("result").innerHTML = data;
			console.log(data);
		});
		function startWorker(men) {
			if(typeof(Worker) !== "undefined") {
				if(typeof(w) == "undefined") {
					w = new Worker("oneMan.js");
					w.postMessage("men");
				}
				w.onmessage = function(event) {

					socket.emit('sendBackToServer',function(event){
						console.log(event.data);
						event.data;
					})

				};

			} else {
				document.getElementById("result").innerHTML = "Sorry, your browser does not support Web Workers...";
			}
		}


	</script>
</html>
